# ğŸ¯ HÆ°á»›ng Dáº«n Há»‡ Thá»‘ng TÃ­ch Äiá»ƒm

## ğŸ“‹ Tá»•ng Quan Há»‡ Thá»‘ng

Há»‡ thá»‘ng tÃ­ch Ä‘iá»ƒm cho phÃ©p khÃ¡ch hÃ ng:
- âœ… TÃ­ch Ä‘iá»ƒm khi mua hÃ ng
- âœ… Äá»•i Ä‘iá»ƒm láº¥y voucher
- âœ… Sá»­ dá»¥ng voucher giáº£m giÃ¡
- âœ… Theo dÃµi lá»‹ch sá»­ giao dá»‹ch Ä‘iá»ƒm
- âœ… NÃ¢ng cáº¥p level VIP

## ğŸ›’ CÃ¡ch Mua HÃ ng VÃ  TÃ­ch Äiá»ƒm

### **BÆ°á»›c 1: ÄÄƒng kÃ½/ÄÄƒng nháº­p**
```
1. Truy cáº­p: http://localhost:8000
2. Click "ÄÄƒng kÃ½" hoáº·c "ÄÄƒng nháº­p"
3. Äiá»n thÃ´ng tin cÃ¡ nhÃ¢n
```

### **BÆ°á»›c 2: Chá»n sáº£n pháº©m**
```
1. Duyá»‡t danh má»¥c sáº£n pháº©m
2. Chá»n sáº£n pháº©m muá»‘n mua
3. Click "ThÃªm vÃ o giá» hÃ ng"
```

### **BÆ°á»›c 3: Thanh toÃ¡n**
```
1. VÃ o giá» hÃ ng: http://localhost:8000/cart
2. Kiá»ƒm tra sáº£n pháº©m vÃ  sá»‘ lÆ°á»£ng
3. Click "Thanh toÃ¡n"
4. Äiá»n thÃ´ng tin giao hÃ ng
5. Chá»n phÆ°Æ¡ng thá»©c thanh toÃ¡n:
   - COD (Thanh toÃ¡n khi nháº­n hÃ ng)
   - MoMo
   - VNPay
```

### **BÆ°á»›c 4: TÃ­ch Ä‘iá»ƒm tá»± Ä‘á»™ng**
```
âœ… Äiá»ƒm sáº½ Ä‘Æ°á»£c tÃ­ch tá»± Ä‘á»™ng khi:
- ÄÆ¡n hÃ ng chuyá»ƒn sang tráº¡ng thÃ¡i "completed"
- Há»‡ thá»‘ng tÃ­nh Ä‘iá»ƒm dá»±a trÃªn:
  + GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng
  + Level VIP cá»§a khÃ¡ch hÃ ng
```

## ğŸ’° CÃ¡ch TÃ­nh Äiá»ƒm

### **CÃ´ng thá»©c tÃ­nh Ä‘iá»ƒm:**
```
Äiá»ƒm tÃ­ch = GiÃ¡ trá»‹ Ä‘Æ¡n hÃ ng Ã— Tá»· lá»‡ tÃ­ch Ä‘iá»ƒm
```

### **Tá»· lá»‡ tÃ­ch Ä‘iá»ƒm theo level:**
- **Bronze** (Máº·c Ä‘á»‹nh): 5% = 0.05
- **Silver**: 7% = 0.07  
- **Gold**: 10% = 0.10
- **Platinum**: 15% = 0.15

### **VÃ­ dá»¥:**
```
ÄÆ¡n hÃ ng: 1,000,000 VND
Level: Bronze (5%)
Äiá»ƒm tÃ­ch: 1,000,000 Ã— 0.05 = 50,000 Ä‘iá»ƒm
```

## ğŸ Äá»•i Äiá»ƒm Láº¥y Voucher

### **BÆ°á»›c 1: Xem Ä‘iá»ƒm hiá»‡n táº¡i**
```
1. ÄÄƒng nháº­p vÃ o tÃ i khoáº£n
2. VÃ o trang "Äiá»ƒm tÃ­ch lÅ©y"
3. Xem sá»‘ Ä‘iá»ƒm hiá»‡n cÃ³
```

### **BÆ°á»›c 2: Chá»n voucher**
```
1. Xem danh sÃ¡ch voucher cÃ³ sáºµn
2. Chá»n voucher muá»‘n Ä‘á»•i
3. Kiá»ƒm tra Ä‘iá»ƒm cáº§n thiáº¿t
```

### **BÆ°á»›c 3: Äá»•i voucher**
```
1. Click "Äá»•i voucher"
2. XÃ¡c nháº­n giao dá»‹ch
3. Nháº­n mÃ£ voucher
```

## ğŸ·ï¸ Sá»­ Dá»¥ng Voucher

### **Khi thanh toÃ¡n:**
```
1. Trong trang thanh toÃ¡n
2. Nháº­p mÃ£ voucher vÃ o Ã´ "MÃ£ giáº£m giÃ¡"
3. Click "Ãp dá»¥ng"
4. Xem giáº£m giÃ¡ Ä‘Æ°á»£c Ã¡p dá»¥ng
```

## ğŸ“Š Theo DÃµi Äiá»ƒm

### **Xem thÃ´ng tin Ä‘iá»ƒm:**
```
- Tá»•ng Ä‘iá»ƒm: Äiá»ƒm hiá»‡n cÃ³
- Äiá»ƒm Ä‘Ã£ tÃ­ch: Tá»•ng Ä‘iá»ƒm Ä‘Ã£ nháº­n
- Äiá»ƒm Ä‘Ã£ dÃ¹ng: Äiá»ƒm Ä‘Ã£ Ä‘á»•i voucher
- Äiá»ƒm háº¿t háº¡n: Äiá»ƒm khÃ´ng cÃ²n hiá»‡u lá»±c
```

### **Lá»‹ch sá»­ giao dá»‹ch:**
```
- NgÃ y tÃ­ch Ä‘iá»ƒm
- Nguá»“n tÃ­ch Ä‘iá»ƒm (Ä‘Æ¡n hÃ ng nÃ o)
- Sá»‘ Ä‘iá»ƒm tÃ­ch
- NgÃ y háº¿t háº¡n
```

## ğŸ† Level VIP

### **CÃ¡ch nÃ¢ng cáº¥p level:**
```
- TÃ­ch lÅ©y Ä‘iá»ƒm theo thá»i gian
- Mua hÃ ng thÆ°á»ng xuyÃªn
- Tá»•ng giÃ¡ trá»‹ Ä‘Æ¡n hÃ ng cao
```

### **Quyá»n lá»£i level:**
- **Bronze**: Tá»· lá»‡ tÃ­ch Ä‘iá»ƒm 5%
- **Silver**: Tá»· lá»‡ tÃ­ch Ä‘iá»ƒm 7%
- **Gold**: Tá»· lá»‡ tÃ­ch Ä‘iá»ƒm 10%
- **Platinum**: Tá»· lá»‡ tÃ­ch Ä‘iá»ƒm 15%

## â° Thá»i Háº¡n Äiá»ƒm

### **Quy Ä‘á»‹nh:**
```
- Äiá»ƒm cÃ³ hiá»‡u lá»±c: 12 thÃ¡ng
- Sau 12 thÃ¡ng: Äiá»ƒm tá»± Ä‘á»™ng háº¿t háº¡n
- Há»‡ thá»‘ng tá»± Ä‘á»™ng xá»­ lÃ½ Ä‘iá»ƒm háº¿t háº¡n
```

## ğŸ”§ Lá»‡nh Há»‡ Thá»‘ng

### **Cáº­p nháº­t thá»‘ng kÃª Ä‘iá»ƒm:**
```bash
php artisan orders:update-stats
```

### **Xá»­ lÃ½ Ä‘iá»ƒm háº¿t háº¡n:**
```bash
# Tá»± Ä‘á»™ng cháº¡y hÃ ng ngÃ y
php artisan schedule:run
```

### **Táº¡o Ä‘iá»ƒm thÆ°á»Ÿng (Admin):**
```php
$pointService->giveBonusPoints($user, 1000, 'Äiá»ƒm thÆ°á»Ÿng khuyáº¿n mÃ£i');
```

## ğŸš¨ LÆ°u Ã Quan Trá»ng

### **Äiá»u kiá»‡n tÃ­ch Ä‘iá»ƒm:**
- âœ… ÄÆ¡n hÃ ng pháº£i hoÃ n thÃ nh (status = 'completed')
- âœ… KhÃ¡ch hÃ ng pháº£i Ä‘Äƒng nháº­p
- âœ… ÄÆ¡n hÃ ng há»£p lá»‡ (khÃ´ng bá»‹ há»§y)

### **Äiá»u kiá»‡n Ä‘á»•i voucher:**
- âœ… CÃ³ Ä‘á»§ Ä‘iá»ƒm
- âœ… Voucher cÃ²n hiá»‡u lá»±c
- âœ… KhÃ´ng vÆ°á»£t quÃ¡ giá»›i háº¡n Ä‘á»•i

### **Äiá»u kiá»‡n sá»­ dá»¥ng voucher:**
- âœ… Voucher chÆ°a háº¿t háº¡n
- âœ… ÄÆ¡n hÃ ng Ä‘á»§ Ä‘iá»u kiá»‡n (giÃ¡ trá»‹ tá»‘i thiá»ƒu)
- âœ… ChÆ°a Ä‘Æ°á»£c sá»­ dá»¥ng

## ğŸ“ Há»— Trá»£

### **Náº¿u gáº·p váº¥n Ä‘á»:**
1. Kiá»ƒm tra log: `storage/logs/laravel.log`
2. Cháº¡y command: `php artisan orders:update-stats`
3. XÃ³a cache: `php artisan cache:clear`
4. LiÃªn há»‡ admin Ä‘á»ƒ há»— trá»£

### **Test há»‡ thá»‘ng:**
1. Táº¡o Ä‘Æ¡n hÃ ng test
2. Chuyá»ƒn tráº¡ng thÃ¡i sang "completed"
3. Kiá»ƒm tra Ä‘iá»ƒm Ä‘Æ°á»£c tÃ­ch
4. Test Ä‘á»•i voucher
5. Test sá»­ dá»¥ng voucher

---

**ğŸ‰ ChÃºc báº¡n sá»­ dá»¥ng há»‡ thá»‘ng tÃ­ch Ä‘iá»ƒm hiá»‡u quáº£!** 
